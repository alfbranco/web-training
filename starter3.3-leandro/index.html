<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="plural.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

    <meta charset="UTF-8">
    <title>Starter 3-3</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        jQuery(document).ready(function () {

            var index = -1
            var questionnaire = {
                file: '6.3.mp3',
                questions: [{
                        question: 'Most men don'+"'"+'t like cooking!',
                        answer: ['true','not sure'],
                        start: 4.5,
                        end: 3000
                    },
                    {
                        question: 'this is question two',
                        start: 27,
                        end: 21000
                    },
                    {
                        question: 'this is question three',
                        start: 1.6,
                        end: 12000
                    }]
            }

            var playAudio = $('#playAudio');
            playAudio.attr('src', questionnaire.file)
            //playAudio.load();
            //$('#ans_simon').open();
            var timeout = 0;
            var audio = playAudio[0];
            //audio.volume = 0.4;
            audio.load();

            audio.addEventListener('canplaythrough', function () {
                setTimeout(function () {
                            audio.pause();
                            $('button').prop('disabled', false);

                            $("#ans_simon").attr('disabled', false);
                            $("#ans_emma").attr('disabled', false);

                            if(timeout > 0) {
                                $("#ans_simon").val('');
                                $("#ans_emma").val('');
                            }
                        },
                        timeout);
                //$("#ans_simon").attr('disabled', false)

            }, false);

            //alfredo_muda_o_nome();

            $('#label').click(function(){
                //if(questionnaire.questions.length < index) {
                    index++;
                    fast_foward();
                    //alert(index) jsdkfja
                //}
            })

            function fast_foward(){
                var question_current = questionnaire.questions[index];
                $('#label').text(question_current.question);
                $('button').prop('disabled', true);

                $("#ans_simon").attr('disabled', true);
                $("#ans_emma").attr('disabled', true);

                timeout = question_current.end;
                audio.currentTime = question_current.start;
                audio.play();

            }

            $('.answer').click(function(){

                var question_current = questionnaire.questions[index];
                var correct_answer = question_current.answer[$('.answer').index(this)];

                //var selected = $(this).find("option:selected").val();
                var selected = $(this).val();

                alert(selected + ' ' + correct_answer);
            })
/*
            $('#ans_simon').click(function(){
                var question_current = questionnaire.questions[index];
                var correct_answer = question_current.answer[0];
                var selected = $(this).val();

                alert('Simon: ' + selected + ' ' + correct_answer);
            })

            $('#ans_emma').click(function(){
                var question_current = questionnaire.questions[index];
                var correct_answer = question_current.answer[1];
                var selected = $(this).val();

                alert('Emma: ' + selected + ' ' + correct_answer);
            })
*/
        })

    </script>

</head>
<BODY style="background-color: dimgrey">
<audio id='playAudio' controls>
    your browser does not support....
</audio>

<form>

    <br>
    Questions
    <br>
    it finally worked


    <button id="label" type="button" class="btn btn-primary btn-block" id="play1">Waiting 4 challenge</button>
    <div class="form-group">
        <label class="col-xs-3 control-label">Language</label>
        <div class="col-xs-2 selectContainer">
            <select multiple id="ans_simon" name="ans_simon" class="form-control answer" size="5">
                <option value="">Simon</option>
                <option value="true">True</option>
                <option value="false">False</option>
                <option value="not sure">Not sure</option>
            </select>
        </div>
        <div class="col-xs-2 selectContainer">
            <select multiple id="ans_emma" name="ans_emma" class="form-control answer" size="5">
                <option value="">Emma</option>
                <option value="true">True</option>
                <option value="false">False</option>
                <option value="not sure">Not sure</option>
            </select>
        </div>
    </div>

</form>
</body>
</html>